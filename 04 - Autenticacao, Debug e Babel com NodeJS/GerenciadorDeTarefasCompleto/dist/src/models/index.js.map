{"version":3,"sources":["../../../src/models/index.js"],"names":["debug","require","basename","module","filename","env","process","NODE_ENV","config","dialectOptions","charset","define","freezeTableName","timestamps","operatorsAliases","$eq","eq","$ne","ne","$gte","gte","$gt","gt","$lte","lte","$lt","lt","$not","not","$in","in","$notIn","notIn","$is","is","$like","like","$notLike","notLike","$iLike","iLike","$notILike","notILike","$regexp","regexp","$notRegexp","notRegexp","$iRegexp","iRegexp","$notIRegexp","notIRegexp","$between","between","$notBetween","notBetween","$overlap","overlap","$contains","contains","$contained","contained","$adjacent","adjacent","$strictLeft","strictLeft","$strictRight","strictRight","$noExtendRight","noExtendRight","$noExtendLeft","noExtendLeft","$and","and","$or","or","$any","any","$all","all","$values","values","$col","col","sequelize","database","username","password","db","readdirSync","__dirname","filter","file","indexOf","slice","forEach","fileName","model","import","join","Object","keys","modelName","associate"],"mappings":";;;;;;;AAAA;;;;AACA;;;;AACA;;;;;;AACA,IAAMA,QAAQC,QAAQ,OAAR,EAAiB,aAAjB,CAAd;;AAEA,IAAMC,WAAW,eAAKA,QAAL,CAAcC,OAAOC,QAArB,CAAjB;AACA,IAAMC,MAAMC,QAAQD,GAAR,CAAYE,QAAZ,IAAwB,aAApC;AACA,IAAMC,SAASP,QAAQ,0BAAR,EAAoCI,GAApC,CAAf;;AAEAG,OAAOC,cAAP,GAAwB;AACpBC,aAAS,MADW,CACJ;AADI,CAAxB;AAGAF,OAAOG,MAAP,GAAgB;AACZC,qBAAiB,KADL,EACY;AACxBC,gBAAY,IAFA,CAEM;AAFN,CAAhB;AAIAL,OAAOM,gBAAP,GAA0B;AACtBC,SAAK,cAAGC,EADc;AAEtBC,SAAK,cAAGC,EAFc;AAGtBC,UAAM,cAAGC,GAHa;AAItBC,SAAK,cAAGC,EAJc;AAKtBC,UAAM,cAAGC,GALa;AAMtBC,SAAK,cAAGC,EANc;AAOtBC,UAAM,cAAGC,GAPa;AAQtBC,SAAK,cAAGC,EARc;AAStBC,YAAQ,cAAGC,KATW;AAUtBC,SAAK,cAAGC,EAVc;AAWtBC,WAAO,cAAGC,IAXY;AAYtBC,cAAU,cAAGC,OAZS;AAatBC,YAAQ,cAAGC,KAbW;AActBC,eAAW,cAAGC,QAdQ;AAetBC,aAAS,cAAGC,MAfU;AAgBtBC,gBAAY,cAAGC,SAhBO;AAiBtBC,cAAU,cAAGC,OAjBS;AAkBtBC,iBAAa,cAAGC,UAlBM;AAmBtBC,cAAU,cAAGC,OAnBS;AAoBtBC,iBAAa,cAAGC,UApBM;AAqBtBC,cAAU,cAAGC,OArBS;AAsBtBC,eAAW,cAAGC,QAtBQ;AAuBtBC,gBAAY,cAAGC,SAvBO;AAwBtBC,eAAW,cAAGC,QAxBQ;AAyBtBC,iBAAa,cAAGC,UAzBM;AA0BtBC,kBAAc,cAAGC,WA1BK;AA2BtBC,oBAAgB,cAAGC,aA3BG;AA4BtBC,mBAAe,cAAGC,YA5BI;AA6BtBC,UAAM,cAAGC,GA7Ba;AA8BtBC,SAAK,cAAGC,EA9Bc;AA+BtBC,UAAM,cAAGC,GA/Ba;AAgCtBC,UAAM,cAAGC,GAhCa;AAiCtBC,aAAS,cAAGC,MAjCU;AAkCtBC,UAAM,cAAGC;AAlCa,CAA1B;;AAqCO,IAAMC,gCAAY,wBAAc3E,OAAO4E,QAArB,EAA+B5E,OAAO6E,QAAtC,EAAgD7E,OAAO8E,QAAvD,EAAiE9E,MAAjE,CAAlB;;AAEP;;;AAGA,IAAM+E,KAAK,EAAX;;AAEA,aAAGC,WAAH,CAAeC,SAAf,EACKC,MADL,CACY,UAACC,IAAD,EAAU;AACd;AACA,WAAQA,KAAKC,OAAL,CAAa,GAAb,MAAsB,CAAvB,IAA8BD,SAASzF,QAAvC,IAAqDyF,KAAKE,KAAL,CAAW,CAAC,CAAZ,MAAmB,KAA/E;AACH,CAJL,EAKKC,OALL,CAKa,UAACH,IAAD,EAAU;AACf,QAAMI,WAAWJ,KAAKE,KAAL,CAAW,CAAX,EAAc,CAAC,CAAf,CAAjB;AACA7F,UAAM,cAAc+F,QAApB;AACA,QAAMC,QAAQb,UAAUc,MAAV,CAAiB,eAAKC,IAAL,CAAUT,SAAV,EAAqBE,IAArB,CAAjB,CAAd;AACAJ,OAAGQ,QAAH,IAAeC,KAAf;AACH,CAVL;;AAYA;AACAG,OAAOC,IAAP,CAAYb,EAAZ,EAAgBO,OAAhB,CAAwB,UAACO,SAAD,EAAe;AACnC,QAAId,GAAGc,SAAH,EAAcC,SAAlB,EAA6B;AACzBtG,cAAM,kBAAkBqG,SAAxB;AACAd,WAAGc,SAAH,EAAcC,SAAd,CAAwBf,EAAxB;AACH;AACJ,CALD;;kBAOeA,E","file":"index.js","sourcesContent":["import fs from 'fs';\nimport path from 'path';\nimport Sequelize, { Op } from 'sequelize';\nconst debug = require('debug')('http:models');\n\nconst basename = path.basename(module.filename);\nconst env = process.env.NODE_ENV || 'development';\nconst config = require('../../config/config.json')[env];\n\nconfig.dialectOptions = {\n    charset: 'UTF8' // define o charset do banco de dados\n};\nconfig.define = {\n    freezeTableName: false, // permite plural no nome das tabelas\n    timestamps: true, // permite a criação das colunas updatedAt e createdAt\n};\nconfig.operatorsAliases = {\n    $eq: Op.eq,\n    $ne: Op.ne,\n    $gte: Op.gte,\n    $gt: Op.gt,\n    $lte: Op.lte,\n    $lt: Op.lt,\n    $not: Op.not,\n    $in: Op.in,\n    $notIn: Op.notIn,\n    $is: Op.is,\n    $like: Op.like,\n    $notLike: Op.notLike,\n    $iLike: Op.iLike,\n    $notILike: Op.notILike,\n    $regexp: Op.regexp,\n    $notRegexp: Op.notRegexp,\n    $iRegexp: Op.iRegexp,\n    $notIRegexp: Op.notIRegexp,\n    $between: Op.between,\n    $notBetween: Op.notBetween,\n    $overlap: Op.overlap,\n    $contains: Op.contains,\n    $contained: Op.contained,\n    $adjacent: Op.adjacent,\n    $strictLeft: Op.strictLeft,\n    $strictRight: Op.strictRight,\n    $noExtendRight: Op.noExtendRight,\n    $noExtendLeft: Op.noExtendLeft,\n    $and: Op.and,\n    $or: Op.or,\n    $any: Op.any,\n    $all: Op.all,\n    $values: Op.values,\n    $col: Op.col\n};\n\nexport const sequelize = new Sequelize(config.database, config.username, config.password, config);\n\n/**\n * @type {Object.<string, Sequelize.Model>}\n */\nconst db = {};\n\nfs.readdirSync(__dirname)\n    .filter((file) => {\n        // seleciona os arquivos com extensão .js\n        return (file.indexOf('.') !== 0) && (file !== basename) && (file.slice(-3) === '.js');\n    })\n    .forEach((file) => {\n        const fileName = file.slice(0, -3);\n        debug('Loading: ' + fileName);\n        const model = sequelize.import(path.join(__dirname, file));\n        db[fileName] = model;\n    });\n\n// Chama a função 'associate' de cada entidade para configurar os relacionamentos\nObject.keys(db).forEach((modelName) => {\n    if (db[modelName].associate) {\n        debug('Associating: ' + modelName);\n        db[modelName].associate(db);\n    }\n});\n\nexport default db;\n"]}